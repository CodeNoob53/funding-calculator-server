# Сервер Калькулятора Фандингу

![Node.js](https://img.shields.io/badge/Node.js-18%2B-green.svg)
![License](https://img.shields.io/badge/License-ISC-blue.svg)
![GitHub Issues](https://img.shields.io/github/issues/CodeNoob53/funding-calculator-server.svg)

**Сервер Калькулятора Фандингу** - це надійний проксі-сервер, розроблений для взаємодії з API Coinglass, що надає дані про ставки фандингу для криптовалютних ринків у реальному часі. Він служить бекендом для додатку калькулятора фандингу, пропонуючи як HTTP, так і WebSocket інтерфейси для отримання даних та оновлень у реальному часі. Побудований на Node.js, Express та Socket.IO, цей сервер забезпечує високу продуктивність, масштабованість та надійність.

## Огляд

Цей сервер виступає мостом між API Coinglass та клієнтськими додатками, кешуючи дані для зменшення API-запитів та надаючи оновлення в реальному часі через WebSocket. Він включає такі функції, як автентифікація за API-ключем, обмеження швидкості, моніторинг Prometheus та структуроване логування для легкого обслуговування та налагодження.

Для детальної документації, включаючи архітектуру, конфігурацію, API-ендпоінти та WebSocket-події, будь ласка, зверніться до [повної документації](../doc.md).

## Функції

- Проксі-доступ до API Coinglass для даних про ставки фандингу.
- Оновлення даних у реальному часі через WebSocket з розумним виявленням змін.
- Кешування в пам'яті для оптимізації продуктивності.
- Автентифікація за API-ключем для безпечного доступу.
- Розширені функції WebSocket, включаючи:
  - Користувацький моніторинг heartbeat
  - Відстеження статистики з'єднань
  - Вимірювання затримки
  - Вибіркова підписка на дані
- Обмеження швидкості для запобігання зловживанням.
- Метрики Prometheus для моніторингу продуктивності.
- Структуроване логування з Winston.
- Плавне завершення роботи при сигналах завершення.

## Передумови

- **Node.js**: Версія 18.0.0 або вище.
- **npm**: Версія 8.0.0 або вище (або Yarn).
- **Coinglass API Key**: Необхідний для доступу до даних про ставки фандингу.
- **Git** (опціонально, для клонування репозиторію).

## Встановлення

1. **Клонування репозиторію**:
   ```bash
   git clone https://github.com/CodeNoob53/funding-calculator-server.git
   cd funding-calculator-server
   ```

2. **Встановлення залежностей**:
   ```bash
   npm install
   ```

3. **Налаштування середовища**:
   - Скопіюйте файл `.env.example` до `.env`:
     ```bash
     cp .env.example .env
     ```
   - Відредагуйте `.env` з вашим API-ключем Coinglass та іншими налаштуваннями (див. [Конфігурація](../doc.md#configuration)).

4. **Створення директорії для логів**:
   ```bash
   mkdir logs
   ```

## Запуск сервера

### Режим розробки
Запустіть сервер з автоматичним перезапуском за допомогою `nodemon`:
```bash
npm run dev
```

### Виробничий режим
Запустіть сервер у виробничому режимі:
```bash
npm start
```

Сервер запуститься на вказаному порту (за замовчуванням: `3001`). Перевірте консоль для підтвердження:
```
[HH:mm:ss] INFO   Server running on port 3001
```

## Приклад WebSocket клієнта

Для детального прикладу реалізації WebSocket клієнта, будь ласка, зверніться до розділу [WebSocket Події](../doc.md#приклад-websocket-клієнта) в документації.

## Конфігурація

Сервер налаштовується через змінні середовища у файлі `.env`. Зверніться до розділу [Конфігурація](../doc.md#configuration) в документації для детального списку змінних та їх значень за замовчуванням.

## Внесок

Ми вітаємо внески для покращення Сервера Калькулятора Фандингу! Будь ласка, дотримуйтесь цих кроків:

1. Зробіть форк репозиторію.
2. Створіть гілку для функції:
   ```bash
   git checkout -b feature/your-feature
   ```
3. Зробіть коміт змін:
   ```bash
   git commit -m "Add your feature"
   ```
4. Відправте у гілку:
   ```bash
   git push origin feature/your-feature
   ```
5. Відкрийте pull request.

Будь ласка, дотримуйтесь Кодексу поведінки та переконайтесь, що всі зміни добре задокументовані.

## Ліцензія

Цей проект ліцензований під **ISC License**. Дивіться файл [LICENSE](LICENSE) для деталей.

## Підтримка

Якщо ви зіткнулися з проблемами або маєте питання, будь ласка, відкрийте issue на [сторінці GitHub Issues](https://github.com/CodeNoob53/funding-calculator-server/issues).

## Подяки

- Дякуємо команді Coinglass за надання API.
- Створено з любов'ю за допомогою Node.js, Express та Socket.IO.

---

*Останнє оновлення: травень 2025*